# åº”ç”¨æ¡†æ¶è®¾è®¡å¯è¡Œæ€§åˆ†æ

> ç‰ˆæœ¬ï¼šv1.0
> æ—¥æœŸï¼š2026-01-26
> ä½œè€…ï¼šSprouty AI Team

## æ‰§è¡Œæ‘˜è¦

**æ€»ä½“è¯„ä¼°**ï¼šâœ… **å¯è¡Œä¸”æ¨èå®æ–½**

å½“å‰åº”ç”¨æ¡†æ¶è®¾è®¡åœ¨ç°æœ‰é¡¹ç›®åŸºç¡€ä¸Šæ˜¯**å®Œå…¨å¯è¡Œçš„**,å¹¶ä¸”èƒ½å¤Ÿ**å……åˆ†å‘æŒ¥ç°æœ‰èƒ½åŠ›**ã€‚ä½†éœ€è¦åœ¨ä»¥ä¸‹å‡ ä¸ªå…³é”®é¢†åŸŸè¿›è¡Œè°ƒæ•´å’Œè¡¥å……ã€‚

### æ ¸å¿ƒä¼˜åŠ¿
1. âœ… Skills å±‚å®Œå…¨å¯¹é½ç°æœ‰ `packages/shared/src/skills` å®ç°
2. âœ… åŸºäº Prompt çš„æµç¨‹ç¼–æ’å……åˆ†åˆ©ç”¨ Claude Agent SDK çš„ agentic loop
3. âœ… å·¥ä½œåŒºã€ä¼šè¯ã€æƒé™ç®¡ç†ç­‰æ ¸å¿ƒèƒ½åŠ›å·²å®ç°
4. âœ… ä¸ç°æœ‰ä»£ç æ— å†²çª,æ˜¯è‡ªç„¶çš„æ¶æ„æ¼”è¿›

### éœ€è¦è¡¥å……çš„å…³é”®èƒ½åŠ›
1. âš ï¸ **å¹³å°å±‚(æ’ä»¶ç³»ç»Ÿ)** - å®Œå…¨ç¼ºå¤±,éœ€è¦ä»é›¶å®ç°
2. âš ï¸ **åº”ç”¨å±‚(manifest + åŠ è½½æœºåˆ¶)** - å®Œå…¨ç¼ºå¤±,éœ€è¦ä»é›¶å®ç°
3. âš ï¸ **UI æ‰©å±•æœºåˆ¶** - éƒ¨åˆ†ç¼ºå¤±,éœ€è¦è®¾è®¡æ’ä»¶åŒ– UI ç³»ç»Ÿ
4. âš ï¸ **å¸‚åœºä½“ç³»** - å®Œå…¨ç¼ºå¤±,éœ€è¦ä»é›¶å®ç°

---

## ä¸€ã€ç°æœ‰èƒ½åŠ›æ¸…å•

### 1.1 å·²å®ç°ä¸”å¯ç›´æ¥å¤ç”¨çš„èƒ½åŠ›

#### âœ… å·¥ä½œåŒºç®¡ç† (`packages/shared/src/workspaces/`)

**å®Œå¤‡ç¨‹åº¦**: 95% - æ ¸å¿ƒåŠŸèƒ½å®Œæ•´

```typescript
// ç°æœ‰èƒ½åŠ›
- å·¥ä½œåŒºåˆ›å»º/åˆ é™¤/é‡å‘½å
- é…ç½®å­˜å‚¨å’ŒåŠ è½½ (config.json)
- ç›®å½•ç»“æ„ç®¡ç† (~/.creator-flow/workspaces/{id}/)
- æ’ä»¶ manifest æ”¯æŒ (.claude-plugin/plugin.json)
- è‡ªåŠ¨å‘ç°æœºåˆ¶

// å­˜å‚¨ç»“æ„
~/.creator-flow/workspaces/{id}/
â”œâ”€â”€ .creator-flow/          # å·¥ä½œåŒºæ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ config.json         # âœ… å·²æœ‰
â”‚   â”œâ”€â”€ sessions/           # âœ… å·²æœ‰
â”‚   â”œâ”€â”€ skills/             # âœ… å·²æœ‰
â”‚   â”œâ”€â”€ sources/            # âœ… å·²æœ‰
â”‚   â””â”€â”€ statuses/           # âœ… å·²æœ‰
```

**ä¸åº”ç”¨æ¡†æ¶çš„å¯¹é½**:
- âœ… å·¥ä½œåŒºæ ¹ç›®å½•å³ä¸ºåº”ç”¨å·¥ä½œç›®å½•
- âœ… `.creator-flow/` ç›®å½•å®Œå…¨ç¬¦åˆè®¾è®¡
- âš ï¸ ç¼ºå°‘åº”ç”¨ç»‘å®š (`appId`, `installedPlugins`) - éœ€è¦æ‰©å±• `WorkspaceConfig`

**éœ€è¦çš„æ‰©å±•**:
```typescript
// æ‰©å±• WorkspaceConfig
interface WorkspaceConfig {
  // ... ç°æœ‰å­—æ®µ
  appId?: string;                    // ç»‘å®šçš„ä¸»åº”ç”¨ ID
  installedPluginApps?: string[];    // å·²å®‰è£…çš„æ’ä»¶åº”ç”¨
  appSettings?: Record<string, any>; // åº”ç”¨çº§è®¾ç½®
}
```

#### âœ… Skills ç®¡ç† (`packages/shared/src/skills/`)

**å®Œå¤‡ç¨‹åº¦**: 100% - å®Œå…¨ç¬¦åˆ Claude Agent Skill æ ¼å¼

```typescript
// ç°æœ‰èƒ½åŠ›
- Skill åŠ è½½/åˆ é™¤/åˆ—è¡¨
- SKILL.md è§£æ (YAML frontmatter + Markdown)
- Icon ç®¡ç† (emoji æˆ– URL)
- å…ƒæ•°æ®éªŒè¯

// Skill ç»“æ„
{
  slug: string;
  metadata: {
    name: string;
    description: string;
    globs?: string[];
    alwaysAllow?: string[];
    icon?: string;
  };
  content: string;  // Markdown å†…å®¹ä½œä¸º system prompt
  iconPath?: string;
  path: string;
}
```

**ä¸åº”ç”¨æ¡†æ¶çš„å¯¹é½**:
- âœ… å®Œå…¨ç¬¦åˆè®¾è®¡,æ— éœ€ä¿®æ”¹
- âœ… æ”¯æŒæµç¨‹ç¼–æ’ç±» Skill (é€šè¿‡ prompt)
- âœ… å­˜å‚¨ä½ç½®æ­£ç¡® (`{workspace}/.creator-flow/skills/`)

**æ— éœ€æ‰©å±•** - å·²å®Œç¾å¯¹é½

#### âœ… Agent æ‰§è¡Œå¼•æ“ (`packages/shared/src/agent/`)

**å®Œå¤‡ç¨‹åº¦**: 90% - æ ¸å¿ƒèƒ½åŠ›å®Œæ•´

```typescript
// ç°æœ‰èƒ½åŠ›
- SproutyAgent ç±»
- Permission mode ç®¡ç† (safe/ask/allow-all)
- MCP å·¥å…·é›†æˆ
- Bash å‘½ä»¤æƒé™æ§åˆ¶
- Session ç®¡ç†å’Œæ¢å¤
- é…ç½®çƒ­é‡è½½
- Thinking levels
- å¤š Source æ”¯æŒ
```

**ä¸åº”ç”¨æ¡†æ¶çš„å¯¹é½**:
- âœ… æ”¯æŒ Skill åŠ è½½å’Œåº”ç”¨
- âœ… æƒé™ç³»ç»Ÿå®Œæ•´ (workspace + source çº§åˆ«)
- âœ… å·¥å…·è°ƒç”¨å’Œç¼–æ’æœºåˆ¶å®Œå¤‡
- âœ… Agentic loop åŸç”Ÿæ”¯æŒ

**æ— éœ€æ‰©å±•** - å·²å®Œç¾å¯¹é½

#### âœ… ä¼šè¯ç®¡ç† (`packages/shared/src/sessions/`)

**å®Œå¤‡ç¨‹åº¦**: 95%

```typescript
// ç°æœ‰èƒ½åŠ›
- ä¼šè¯åˆ›å»º/åˆ—è¡¨/åˆ é™¤
- ä¼šè¯é…ç½®å­˜å‚¨
- æ¶ˆæ¯æŒä¹…åŒ–
- Session-scoped tools
- Plan ç®¡ç†
```

**ä¸åº”ç”¨æ¡†æ¶çš„å¯¹é½**:
- âœ… ä¼šè¯å³ä¸ºå·¥ä½œåŒºå†…çš„ä»»åŠ¡å®ä¾‹
- âœ… éš”ç¦»è¾¹ç•Œæ¸…æ™°

**æ— éœ€æ‰©å±•**

#### âœ… Sources ç®¡ç† (`packages/shared/src/sources/`)

**å®Œå¤‡ç¨‹åº¦**: 90%

```typescript
// ç°æœ‰èƒ½åŠ›
- Source ç±»å‹å®šä¹‰ (MCP, API, Local, Gmail)
- Credential ç®¡ç†
- æƒé™é…ç½®
- Guide ç³»ç»Ÿ
```

**ä¸åº”ç”¨æ¡†æ¶çš„å¯¹é½**:
- âœ… Sources å¯ä½œä¸ºå¹³å°å±‚çš„"é›†æˆèƒ½åŠ›"
- âš ï¸ éœ€è¦è®¾è®¡å¦‚ä½•å°† Sources æš´éœ²ä¸ºå¯å¤ç”¨çš„å¹³å°æ’ä»¶

**éœ€è¦çš„æ‰©å±•**:
- å°†ç°æœ‰ Sources åŒ…è£…ä¸ºå¹³å°å±‚æ’ä»¶

---

### 1.2 éƒ¨åˆ†å®ç°éœ€è¦æ‰©å±•çš„èƒ½åŠ›

#### âš ï¸ é…ç½®ç³»ç»Ÿ (`packages/shared/src/config/`)

**å®Œå¤‡ç¨‹åº¦**: 70% - æ ¸å¿ƒå­˜åœ¨ä½†éœ€æ‰©å±•

```typescript
// ç°æœ‰èƒ½åŠ›
- å…¨å±€é…ç½® (config.json)
- å·¥ä½œåŒºé»˜è®¤é…ç½®
- æ¨¡å‹ç®¡ç†
- ä¸»é¢˜ç³»ç»Ÿ
- é…ç½®çƒ­é‡è½½ (ConfigWatcher)

// ç¼ºå¤±çš„èƒ½åŠ›
- åº”ç”¨çº§é…ç½®ç®¡ç†
- æ’ä»¶é…ç½®éš”ç¦»
- é…ç½®è¿ç§»æœºåˆ¶
```

**éœ€è¦çš„æ‰©å±•**:
```typescript
// 1. åº”ç”¨é…ç½®å­˜å‚¨
~/.creator-flow/workspaces/{id}/.creator-flow/
â”œâ”€â”€ app-config.json          # åº”ç”¨é…ç½®
â””â”€â”€ plugins/                 # æ’ä»¶é…ç½®ç›®å½•
    â”œâ”€â”€ plugin-a/
    â”‚   â””â”€â”€ config.json
    â””â”€â”€ plugin-b/
        â””â”€â”€ config.json

// 2. æ‰©å±• ConfigWatcher æ”¯æŒåº”ç”¨å’Œæ’ä»¶é…ç½®
class AppConfigWatcher extends ConfigWatcher {
  watchAppConfig(workspaceId: string, appId: string)
  watchPluginConfig(workspaceId: string, pluginId: string)
}
```

#### âš ï¸ UI ç»„ä»¶ç³»ç»Ÿ

**å®Œå¤‡ç¨‹åº¦**: 30% - å­˜åœ¨ä½†ä¸å¯æ‰©å±•

```typescript
// ç°æœ‰çŠ¶å†µ
- Electron UI åŸºäº React + Tailwind v4
- ç»„ä»¶éƒ½æ˜¯ç¡¬ç¼–ç åœ¨ apps/electron/src/renderer/
- æ²¡æœ‰æ’ä»¶åŒ–æœºåˆ¶

// ç¼ºå¤±çš„èƒ½åŠ›
- UI æ’ä»¶æ³¨å†Œå’ŒåŠ è½½
- åŠ¨æ€è·¯ç”±æ³¨å…¥
- èœå•/å·¥å…·æ æ‰©å±•ç‚¹
- ç»„ä»¶çƒ­é‡è½½
```

**éœ€è¦è®¾è®¡å’Œå®ç°**:
```typescript
// UI æ’ä»¶ç³»ç»Ÿ
interface UIPlugin {
  id: string;
  routes?: RouteConfig[];        // åŠ¨æ€è·¯ç”±
  menuItems?: MenuItem[];        // èœå•æ‰©å±•
  toolbarItems?: ToolbarItem[];  // å·¥å…·æ æ‰©å±•
  components?: ComponentRegistry; // å¯å¤ç”¨ç»„ä»¶
}

// æ‰©å±•ç‚¹ç³»ç»Ÿ
class ExtensionPointManager {
  registerRoute(plugin: string, route: RouteConfig)
  registerMenuItem(plugin: string, item: MenuItem)
  registerToolbarItem(plugin: string, item: ToolbarItem)
}
```

---

### 1.3 å®Œå…¨ç¼ºå¤±éœ€è¦ä»é›¶å®ç°çš„èƒ½åŠ›

#### âŒ å¹³å°å±‚æ’ä»¶ç³»ç»Ÿ (Platform Layer)

**å®Œå¤‡ç¨‹åº¦**: 0% - å®Œå…¨ç¼ºå¤±

**éœ€è¦å®ç°çš„æ ¸å¿ƒç»„ä»¶**:

1. **æ’ä»¶å®šä¹‰è§„èŒƒ**
```typescript
// packages/shared/src/platform/types.ts
interface PlatformPlugin {
  id: string;
  name: string;
  version: string;
  type: 'ui' | 'model' | 'integration';
  
  // ç”Ÿå‘½å‘¨æœŸé’©å­
  onInstall?(context: PluginContext): Promise<void>;
  onLoad?(context: PluginContext): Promise<void>;
  onUnload?(): Promise<void>;
  
  // èƒ½åŠ›å£°æ˜
  provides?: {
    components?: ComponentDefinition[];
    models?: ModelDefinition[];
    integrations?: IntegrationDefinition[];
  };
}
```

2. **æ’ä»¶æ³¨å†Œè¡¨**
```typescript
// packages/shared/src/platform/registry.ts
class PluginRegistry {
  private plugins: Map<string, Plugin>;
  
  register(plugin: Plugin): void;
  get(id: string): Plugin | undefined;
  getByType(type: PluginType): Plugin[];
  unregister(id: string): void;
}
```

3. **æ’ä»¶åŠ è½½å™¨**
```typescript
// packages/shared/src/platform/loader.ts
class PluginLoader {
  async load(pluginPath: string): Promise<Plugin>;
  async unload(pluginId: string): Promise<void>;
  async reload(pluginId: string): Promise<void>;
}
```

4. **ä¾èµ–è§£æå™¨**
```typescript
// packages/shared/src/platform/dependencies.ts
class DependencyResolver {
  resolve(manifest: AppManifest): ResolvedDependencies;
  install(deps: Dependency[]): Promise<void>;
  checkVersionCompatibility(required: string, installed: string): boolean;
}
```

**é¢„è®¡å·¥ä½œé‡**: 3-4 å‘¨

#### âŒ åº”ç”¨å±‚ç®¡ç†ç³»ç»Ÿ (Application Layer)

**å®Œå¤‡ç¨‹åº¦**: 0% - å®Œå…¨ç¼ºå¤±

**éœ€è¦å®ç°çš„æ ¸å¿ƒç»„ä»¶**:

1. **åº”ç”¨ Manifest è§£æ**
```typescript
// packages/shared/src/apps/manifest.ts
interface AppManifest {
  id: string;
  name: string;
  version: string;
  dependencies: {
    platform: string;
    ui: string[];
    models: string[];
    integrations: string[];
  };
  capabilities: {
    skills: string[];
  };
  workspace: {
    defaultDirectory: string;
    directoryStructure: DirectoryStructure;
    defaultSettings: Record<string, any>;
    presetData: PresetData;
  };
  // ... å…¶ä»–å­—æ®µ
}
```

2. **åº”ç”¨åŠ è½½å™¨**
```typescript
// packages/shared/src/apps/loader.ts
class AppLoader {
  async load(appId: string): Promise<App>;
  async installDependencies(manifest: AppManifest): Promise<void>;
  async initializeWorkspace(app: App, config: WorkspaceConfig): Promise<void>;
}
```

3. **åº”ç”¨å­˜å‚¨**
```typescript
// ~/.creator-flow/apps/{app-id}/
â”œâ”€â”€ manifest.json
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ icon.png
â””â”€â”€ config/
    â””â”€â”€ defaults.json
```

**é¢„è®¡å·¥ä½œé‡**: 2-3 å‘¨

#### âŒ å¸‚åœºä½“ç³»

**å®Œå¤‡ç¨‹åº¦**: 0% - å®Œå…¨ç¼ºå¤±

éœ€è¦å®ç°:
- åº”ç”¨å¸‚åœº API
- æŠ€èƒ½å¸‚åœº API
- æ‰“åŒ…/å‘å¸ƒå·¥å…·
- ç‰ˆæœ¬ç®¡ç†
- æ›´æ–°æ£€æŸ¥

**é¢„è®¡å·¥ä½œé‡**: 4-5 å‘¨

---

## äºŒã€è®¾è®¡å¯è¡Œæ€§è¯„ä¼°

### 2.1 æŠ€æœ¯å¯è¡Œæ€§: âœ… é«˜åº¦å¯è¡Œ

#### æ¶æ„å…¼å®¹æ€§

| è®¾è®¡ç»„ä»¶ | ç°æœ‰åŸºç¡€ | å…¼å®¹æ€§ | è¯„ä¼° |
|---------|---------|-------|------|
| Skills | âœ… å®Œæ•´å®ç° | 100% | å®Œå…¨å¯¹é½ |
| Workspaces | âœ… æ ¸å¿ƒå®Œæ•´ | 95% | ä»…éœ€å°å¹…æ‰©å±• |
| Agent æ‰§è¡Œ | âœ… å®Œæ•´å®ç° | 100% | æ— ç¼é›†æˆ |
| å¹³å°å±‚æ’ä»¶ | âŒ ç¼ºå¤± | N/A | éœ€ä»é›¶å®ç°ä½†æ— å†²çª |
| åº”ç”¨å±‚ | âŒ ç¼ºå¤± | N/A | éœ€ä»é›¶å®ç°ä½†æ— å†²çª |

#### æŠ€æœ¯æ ˆä¸€è‡´æ€§

```typescript
// è®¾è®¡ä½¿ç”¨çš„æŠ€æœ¯æ ˆ
âœ… TypeScript - é¡¹ç›®å·²å…¨é¢ä½¿ç”¨
âœ… Node.js - é¡¹ç›®å·²ä½¿ç”¨
âœ… Electron - é¡¹ç›®å·²ä½¿ç”¨
âœ… React - é¡¹ç›®å·²ä½¿ç”¨
âœ… SQLite - æœªç”¨åˆ°,è®¾è®¡ä¸­å®é™…ä¹Ÿä¸éœ€è¦
âœ… æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨ - é¡¹ç›®å·²ä½¿ç”¨
```

### 2.2 ä¸šåŠ¡ä»·å€¼è¯„ä¼°: âœ… é«˜ä»·å€¼

#### è§£å†³çš„æ ¸å¿ƒç—›ç‚¹

1. **ç”¨æˆ·ä½“éªŒ**
   - âœ… å½“å‰: éœ€è¦æ‰‹åŠ¨é…ç½® workspace, skills, sources
   - âœ… æ”¹è¿›: é€‰æ‹©åº”ç”¨å³å¯å¼€å§‹å·¥ä½œ

2. **èƒ½åŠ›å¤ç”¨**
   - âœ… å½“å‰: Skills æ— æ³•è·¨ workspace å…±äº«
   - âœ… æ”¹è¿›: å¹³å°å±‚èƒ½åŠ›å…¨å±€å¤ç”¨

3. **åœºæ™¯èšç„¦**
   - âœ… å½“å‰: é€šç”¨ AI åŠ©æ‰‹,æ— é’ˆå¯¹æ€§
   - âœ… æ”¹è¿›: é’ˆå¯¹ç‰¹å®šåœºæ™¯çš„å®Œæ•´è§£å†³æ–¹æ¡ˆ

4. **ç”Ÿæ€å»ºè®¾**
   - âœ… å½“å‰: ä»…å®˜æ–¹å¼€å‘
   - âœ… æ”¹è¿›: å¼€å‘è€…å’Œç”¨æˆ·éƒ½å¯è´¡çŒ®

### 2.3 å®æ–½é£é™©è¯„ä¼°: âš ï¸ ä¸­ç­‰é£é™©

#### ä¸»è¦é£é™©ç‚¹

1. **å¼€å‘å·¥ä½œé‡å¤§** - é£é™©ç­‰çº§: ğŸŸ¡ ä¸­
   - å¹³å°å±‚æ’ä»¶ç³»ç»Ÿ (3-4å‘¨)
   - åº”ç”¨å±‚ç®¡ç† (2-3å‘¨)
   - UI æ‰©å±•æœºåˆ¶ (2-3å‘¨)
   - å¸‚åœºä½“ç³» (4-5å‘¨)
   - **æ€»è®¡**: 11-15 å‘¨

2. **æ¶æ„å¤æ‚åº¦å¢åŠ ** - é£é™©ç­‰çº§: ğŸŸ¡ ä¸­
   - å¼•å…¥ä¸‰å±‚æ¶æ„
   - æ’ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†
   - ä¾èµ–è§£æå’Œç‰ˆæœ¬ç®¡ç†
   - **ç¼“è§£æªæ–½**: æ¸è¿›å¼å®æ–½,å…ˆæ ¸å¿ƒåæ‰©å±•

3. **å‘åå…¼å®¹æ€§** - é£é™©ç­‰çº§: ğŸŸ¢ ä½
   - ç°æœ‰ workspace éœ€è¦è¿ç§»
   - **ç¼“è§£æªæ–½**: è‡ªåŠ¨æ£€æµ‹å’Œè¿ç§»è„šæœ¬

---

## ä¸‰ã€ç°æœ‰èƒ½åŠ›å‘æŒ¥ç¨‹åº¦è¯„ä¼°

### 3.1 å……åˆ†åˆ©ç”¨çš„èƒ½åŠ›: 85%

#### âœ… å®Œå…¨åˆ©ç”¨

1. **Skills ç³»ç»Ÿ** - åˆ©ç”¨ç‡ 100%
   - ç°æœ‰å®ç°å®Œå…¨ç¬¦åˆè®¾è®¡
   - Prompt-based æµç¨‹ç¼–æ’å……åˆ†åˆ©ç”¨ agentic loop

2. **Agent æ‰§è¡Œå¼•æ“** - åˆ©ç”¨ç‡ 100%
   - Permission mode ç³»ç»Ÿç›´æ¥ä½¿ç”¨
   - MCP é›†æˆç›´æ¥ä½¿ç”¨
   - Session ç®¡ç†ç›´æ¥ä½¿ç”¨

3. **Workspace å­˜å‚¨** - åˆ©ç”¨ç‡ 95%
   - ç›®å½•ç»“æ„å®Œå…¨å¤ç”¨
   - é…ç½®ç³»ç»Ÿæ‰©å±•ä½¿ç”¨

4. **Source ç³»ç»Ÿ** - åˆ©ç”¨ç‡ 80%
   - å¯ä½œä¸º"é›†æˆèƒ½åŠ›"é‡æ–°åŒ…è£…
   - Credential ç®¡ç†ç›´æ¥ä½¿ç”¨

#### âš ï¸ éƒ¨åˆ†åˆ©ç”¨

1. **UI ç»„ä»¶** - åˆ©ç”¨ç‡ 30%
   - ç°æœ‰ç»„ä»¶ç¡¬ç¼–ç 
   - éœ€è¦é‡æ„ä¸ºæ’ä»¶åŒ–
   - **å»ºè®®**: æ¸è¿›å¼é‡æ„,ä¼˜å…ˆçº§è¾ƒä½

2. **é…ç½®ç³»ç»Ÿ** - åˆ©ç”¨ç‡ 70%
   - ConfigWatcher å¯æ‰©å±•
   - éœ€è¦å¢åŠ åº”ç”¨çº§å’Œæ’ä»¶çº§é…ç½®

---

## å››ã€å…³é”®è®¾è®¡å†³ç­–éªŒè¯

### 4.1 âœ… ç§»é™¤ç‹¬ç«‹ Workflow å¼•æ“ - æ­£ç¡®å†³ç­–

**ç†ç”±**:
1. Claude Agent SDK çš„ agentic loop å·²æä¾›å·¥ä½œæµèƒ½åŠ›
2. åŸºäº Prompt çš„ç¼–æ’æ›´çµæ´»,æ›´ç¬¦åˆ AI-native ç†å¿µ
3. å‡å°‘å¤æ‚åº¦,é¿å…ç»´æŠ¤ç‹¬ç«‹å¼•æ“
4. Skills æ ¼å¼ä¿æŒä¸ Claude Agent ç”Ÿæ€å…¼å®¹

**éªŒè¯**:
```typescript
// ç°æœ‰ SproutyAgent æ”¯æŒçš„èƒ½åŠ›
- âœ… å¤šè½®å¯¹è¯å’Œä¸Šä¸‹æ–‡ç®¡ç†
- âœ… å·¥å…·è°ƒç”¨å’Œç»“æœå¤„ç†
- âœ… æ¡ä»¶åˆ†æ”¯ (é€šè¿‡ prompt å¼•å¯¼)
- âœ… äººæœºäº¤äº’ (permission requests)
- âœ… çŠ¶æ€æŒä¹…åŒ– (session storage)

// è¶³ä»¥å®ç°å¤æ‚æµç¨‹
```

### 4.2 âœ… Skills = Claude Agent Skill - æ­£ç¡®å†³ç­–

**ç†ç”±**:
1. ç°æœ‰å®ç°å·²å®Œå…¨ç¬¦åˆ
2. ä¸ Claude ç”Ÿæ€æ— ç¼é›†æˆ
3. é¿å…é‡å¤é€ è½®å­

**éªŒè¯**:
```typescript
// packages/shared/src/skills/storage.ts
- âœ… SKILL.md æ ¼å¼ (YAML frontmatter + Markdown)
- âœ… Metadata æ ‡å‡†å­—æ®µ
- âœ… Content ä½œä¸º system prompt
- âœ… å®Œå…¨ç¬¦åˆ Claude Agent Skill è§„èŒƒ
```

### 4.3 âš ï¸ ä¸‰å±‚æ¶æ„ - éœ€è¦æƒè¡¡

**ä¼˜åŠ¿**:
- âœ… èƒ½åŠ›å¤ç”¨æ¸…æ™°
- âœ… èŒè´£åˆ†ç¦»æ˜ç¡®
- âœ… æ‰©å±•æ€§å¼º

**é£é™©**:
- âš ï¸ å¢åŠ å¤æ‚åº¦
- âš ï¸ å­¦ä¹ æ›²çº¿é™¡å³­

**å»ºè®®**: 
- æ¸è¿›å¼å®æ–½
- Phase 1 åªå®ç°åº”ç”¨å±‚ + Skills
- Phase 2 å†åŠ å…¥å¹³å°å±‚æ’ä»¶

---

## äº”ã€å®æ–½å»ºè®®

### 5.1 æ¸è¿›å¼å®æ–½è·¯çº¿

#### Phase 1: æ ¸å¿ƒåº”ç”¨æ¡†æ¶ (4-5 å‘¨)

**ç›®æ ‡**: å®ç°åº”ç”¨ç»‘å®šå’ŒåŸºæœ¬åº”ç”¨ç®¡ç†

```typescript
// æœ€å°å¯ç”¨åŠŸèƒ½
1. âœ… æ‰©å±• WorkspaceConfig æ”¯æŒ appId
2. âœ… å®ç°åº”ç”¨ Manifest è§£æ
3. âœ… å®ç°åº”ç”¨åŠ è½½å’Œå·¥ä½œåŒºåˆå§‹åŒ–
4. âœ… Skills ç»‘å®šåˆ°åº”ç”¨
5. âš ï¸ æš‚æ—¶è·³è¿‡å¹³å°å±‚æ’ä»¶ç³»ç»Ÿ
```

**äº¤ä»˜ç‰©**:
- ç”¨æˆ·å¯ä»¥é€‰æ‹©"åº”ç”¨"åˆ›å»ºå·¥ä½œåŒº
- åº”ç”¨è‡ªåŠ¨åŠ è½½ç»‘å®šçš„ Skills
- åº”ç”¨æä¾›é¢„è®¾é…ç½®

#### Phase 2: å¹³å°å±‚æ’ä»¶ (3-4 å‘¨)

**ç›®æ ‡**: å®ç°æ’ä»¶ç³»ç»Ÿå’Œèƒ½åŠ›å¤ç”¨

```typescript
1. âœ… å®ç° PluginRegistry
2. âœ… å®ç° PluginLoader
3. âœ… å®ç°ä¾èµ–è§£æ
4. âœ… å°†ç°æœ‰ Sources åŒ…è£…ä¸ºå¹³å°æ’ä»¶
5. âœ… UI ç»„ä»¶æ’ä»¶åŒ– (ä¼˜å…ˆçº§å¯é™ä½)
```

#### Phase 3: å¸‚åœºä½“ç³» (4-5 å‘¨)

**ç›®æ ‡**: åº”ç”¨å’ŒæŠ€èƒ½å¸‚åœº

```typescript
1. âœ… æ‰“åŒ…å·¥å…·
2. âœ… æœ¬åœ°å¸‚åœº (æ–‡ä»¶ç³»ç»Ÿ)
3. âš ï¸ è¿œç¨‹å¸‚åœº (å¯å»¶å)
```

### 5.2 å‘åå…¼å®¹æ–¹æ¡ˆ

```typescript
// è‡ªåŠ¨è¿ç§»ç°æœ‰ workspace
async function migrateWorkspace(rootPath: string) {
  const config = loadWorkspaceConfig(rootPath);
  
  // æœªç»‘å®šåº”ç”¨çš„ workspace é»˜è®¤ä½¿ç”¨"é€šç”¨"åº”ç”¨
  if (!config.appId) {
    config.appId = 'app.general';
    saveWorkspaceConfig(rootPath, config);
  }
}
```

### 5.3 å…³é”®æŠ€æœ¯å†³ç­–

#### æ’ä»¶åŠ è½½æœºåˆ¶

**æ¨è**: æ–‡ä»¶ç³»ç»Ÿ + åŠ¨æ€ import

```typescript
// æ’ä»¶ç›®å½•ç»“æ„
~/.creator-flow/platform/
â”œâ”€â”€ ui/
â”‚   â””â”€â”€ content-calendar/
â”‚       â”œâ”€â”€ dist/
â”‚       â”‚   â””â”€â”€ index.js  # ESM bundle
â”‚       â””â”€â”€ manifest.json
â”œâ”€â”€ models/
â””â”€â”€ integrations/

// åŠ è½½æ–¹å¼
const module = await import(`file://${pluginPath}/dist/index.js`);
const plugin = module.default;
```

#### ä¾èµ–ç®¡ç†

**æ¨è**: Semantic versioning + ç®€å•è§£æå™¨

```typescript
// ä¸ä½¿ç”¨ npm,è‡ªå·±å®ç°ç®€å•çš„ç‰ˆæœ¬åŒ¹é…
function satisfiesVersion(installed: string, required: string): boolean {
  // ^1.0.0 => >=1.0.0 <2.0.0
  // ~1.0.0 => >=1.0.0 <1.1.0
  // 1.0.0  => =1.0.0
}
```

---

## å…­ã€æ€»ç»“å’Œå»ºè®®

### 6.1 å¯è¡Œæ€§æ€»ç»“

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|-----|------|------|
| æŠ€æœ¯å¯è¡Œæ€§ | â­â­â­â­â­ | ä¸ç°æœ‰æ¶æ„é«˜åº¦å…¼å®¹ |
| ä¸šåŠ¡ä»·å€¼ | â­â­â­â­â­ | è§£å†³æ ¸å¿ƒç—›ç‚¹ |
| å®æ–½éš¾åº¦ | â­â­â­âšªâšª | å·¥ä½œé‡è¾ƒå¤§ä½†å¯æ§ |
| é£é™©ç¨‹åº¦ | â­â­â­âšªâšª | ä¸­ç­‰é£é™©,å¯ç¼“è§£ |
| **ç»¼åˆè¯„åˆ†** | **â­â­â­â­âšª** | **æ¨èå®æ–½** |

### 6.2 æ ¸å¿ƒå»ºè®®

#### âœ… æ¨èå®æ–½çš„éƒ¨åˆ†

1. **Skills å±‚** - ç«‹å³å¯ç”¨,æ— éœ€ä¿®æ”¹
2. **åº”ç”¨å±‚æ ¸å¿ƒ** - é«˜ä»·å€¼,ä¸­ç­‰æˆæœ¬
3. **æ¸è¿›å¼æ’ä»¶åŒ–** - å…ˆåº”ç”¨åå¹³å°

#### âš ï¸ éœ€è¦è°ƒæ•´çš„éƒ¨åˆ†

1. **UI æ’ä»¶åŒ–** - é™ä½ä¼˜å…ˆçº§,åæœŸé‡æ„
2. **å¸‚åœºä½“ç³»** - Phase 3 å®æ–½,å…ˆæœ¬åœ°åè¿œç¨‹
3. **æ•°æ®æ¨¡å‹æ’ä»¶** - å¤æ‚åº¦é«˜,å¯é€‰åŠŸèƒ½

#### âŒ å»ºè®®å»¶åçš„éƒ¨åˆ†

1. **è¿œç¨‹å¸‚åœº** - å…ˆå®ç°æœ¬åœ°å¸‚åœº
2. **ä»˜è´¹ç³»ç»Ÿ** - å…ˆå®ç°å…è´¹ç”Ÿæ€
3. **å¤æ‚çš„ç‰ˆæœ¬è¿ç§»** - å…ˆå®ç°ç®€å•çš„é…ç½®æ›´æ–°

### 6.3 è¡ŒåŠ¨è®¡åˆ’

**ç«‹å³è¡ŒåŠ¨** (æœ¬å‘¨):
1. æ‰©å±• `WorkspaceConfig` å¢åŠ  `appId` å­—æ®µ
2. åˆ›å»º `packages/shared/src/apps/` ç›®å½•ç»“æ„
3. å®ç°åŸºç¡€çš„ `AppManifest` ç±»å‹å®šä¹‰

**è¿‘æœŸç›®æ ‡** (1ä¸ªæœˆ):
1. å®Œæˆ Phase 1: æ ¸å¿ƒåº”ç”¨æ¡†æ¶
2. å®ç°ç¬¬ä¸€ä¸ªç¤ºä¾‹åº”ç”¨"è‡ªåª’ä½“åˆ›ä½œ"
3. è¿ç§»ç°æœ‰ workspace

**ä¸­æœŸç›®æ ‡** (3ä¸ªæœˆ):
1. å®Œæˆ Phase 2: å¹³å°å±‚æ’ä»¶
2. å®Œæˆ Phase 3: æœ¬åœ°å¸‚åœº
3. æ–‡æ¡£å’Œå¼€å‘è€…å·¥å…·

---

## é™„å½• A: ç°æœ‰ä»£ç æ˜ å°„

### Skills ç³»ç»Ÿ
- å®šä¹‰: `packages/shared/src/skills/types.ts`
- å­˜å‚¨: `packages/shared/src/skills/storage.ts`
- ä½¿ç”¨: `packages/shared/src/agent/creator-flow-agent.ts`

### Workspace ç³»ç»Ÿ
- å®šä¹‰: `packages/shared/src/workspaces/types.ts`
- å­˜å‚¨: `packages/shared/src/workspaces/storage.ts`

### Agent ç³»ç»Ÿ
- æ ¸å¿ƒ: `packages/shared/src/agent/creator-flow-agent.ts`
- æƒé™: `packages/shared/src/agent/mode-manager.ts`
- é…ç½®: `packages/shared/src/agent/permissions-config.ts`

### é…ç½®ç³»ç»Ÿ
- å­˜å‚¨: `packages/shared/src/config/storage.ts`
- çƒ­é‡è½½: `packages/shared/src/config/watcher.ts`

## é™„å½• B: éœ€è¦åˆ›å»ºçš„æ–°æ¨¡å—

```
packages/shared/src/
â”œâ”€â”€ platform/              # æ–°å¢ - å¹³å°å±‚æ’ä»¶ç³»ç»Ÿ
â”‚   â”œâ”€â”€ types.ts
â”‚   â”œâ”€â”€ registry.ts
â”‚   â”œâ”€â”€ loader.ts
â”‚   â””â”€â”€ dependencies.ts
â”œâ”€â”€ apps/                  # æ–°å¢ - åº”ç”¨å±‚ç®¡ç†
â”‚   â”œâ”€â”€ types.ts
â”‚   â”œâ”€â”€ manifest.ts
â”‚   â”œâ”€â”€ loader.ts
â”‚   â””â”€â”€ initializer.ts
â””â”€â”€ marketplace/           # æ–°å¢ - å¸‚åœºä½“ç³»
    â”œâ”€â”€ types.ts
    â”œâ”€â”€ local.ts
    â””â”€â”€ remote.ts (Phase 3)
```
