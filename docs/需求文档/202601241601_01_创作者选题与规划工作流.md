# 创作者选题与规划工作流 PRD（个人创作者版）

> 版本：v0.1 草案  
> 关联文档：00_创流CreatorFlow_产品总览（个人创作者版）

---

## 1. 背景与目标

### 1.1 背景

个人创作者在小红书 / 抖音 / 公众号上的持续输出，最大的日常痛点是：**今天发什么**。目前创作者需要自己刷热点、看竞品、回顾历史数据，过程分散且耗时。

创流需要提供一个**面向个人创作者的轻量选题与规划工作流**：从自然语言意图出发，生成未来 3–7 天的选题与简单计划，并与创作/发布/数据模块联动。

### 1.2 目标

- 帮助个人创作者在 5 分钟内获得一周的内容规划；
- 每个选题都与用户账号/项目定位强绑定，避免「不适合自己」的主题；
- 为后续的脚本创作、图文排版、多平台发布提供结构化输入；
- 形成「数据回流 → 新一轮选题」的闭环能力雏形。

---

## 2. 范围与非目标

### 2.1 范围（v1）

- 场景：个人创作者，单人或少量账号；
- 平台：小红书 / 抖音 / 公众号；
- 时间跨度：单次规划 3–7 天为主；
- 输出形式：一组「选题卡片」+「日程建议」；
- 入口：
  - Agent 对话：如「帮我规划这周 5 条小红书内容」；
  - 项目主页上的「生成本周选题」按钮；
  - 应用首页的「今日推荐选题」区域：系统基于用户默认项目，每天自动生成推荐选题，直接展示给用户选择。

### 2.2 非目标（v1 不做）

- 不提供复杂的长期选题池管理（按季度/全年运营规划）；
- 不做完整的竞品库与长期竞品跟踪系统；
- 不做自动化排期执行（排期执行在发布模块定义，这里只给建议时间段）。

---

## 3. 用户流程

### 3.1 典型流程（周规划）

1. 用户在 Agent 对话中输入：
   - 「帮我规划这周 5 条关于『AI 办公』的小红书内容。」
2. Agent 追问关键信息（如有缺失）：
   - 当前项目是否正确；
   - 是否只发小红书，是否连带抖音/公众号；
   - 每天大概能投入的创作时间；
3. 系统拉取：
   - 当前项目配置（行业、目标人群、品牌调性、关注话题、主打平台等）；
   - 当前项目下小红书/抖音/公众号账号的基础历史数据（最近 30 天高表现内容主题）；
4. Agent 生成：
   - 一周 5–7 个「候选选题卡片」；
   - 每个选题的推荐平台与内容形式（图文 / 图文+短视频 / 长文）；
   - 建议发布日期（如：周一晚上 20:00 发小红书图文）。
5. 用户在「选题规划」界面：
   - 浏览列表；
   - 勾选/删除/修改某些选题标题；
   - 一键创建对应的「脚本草稿」进入脚本工作台。

### 3.2 选题卡片信息结构（与 `project_topics` 表字段对齐）

> 选题卡片是 `public.project_topics` 表的一行数据在产品层的可视化呈现。

**存储字段（后端/数据层）**  —— 来自 `/sql/project_topics.sql`：

- 基础标识
  - `id`：主键 ID (UUID)
  - `project_id`：项目 ID
  - `user_id`：用户 ID
- 选题核心信息
  - `title`：选题标题（卡片主标题）
  - `potential_score`：选题潜力分数（0–1 或 0–100）
  - `heat_index`：热度指数
  - `reason`：推荐理由（简要说明为什么推荐）
  - `status`：状态（0: 待选 1: 已采纳 2: 已忽略）
  - `batch_date`：生成批次日期
  - `source_uid`：来源幂等键（用于去重）
- 结构化维度
  - `keywords` (jsonb)：标签/关键词列表
  - `platform_heat` (jsonb)：平台热度分布（如小红书/抖音/公众号各自分数）
  - `heat_sources` (jsonb)：热度来源（平台榜单、搜索趋势、外部数据源等）
  - `trend` (jsonb)：趋势走势（上升/平稳/下降及相关数据）
  - `industry_tags` (jsonb)：适配行业标签
  - `target_audience` (jsonb)：目标人群画像
  - `creative_angles` (jsonb)：推荐创作角度列表
  - `content_outline` (jsonb)：内容结构要点（3–5 条）
  - `format_suggestions` (jsonb)：形式建议（图文 / 图文+短视频 / 长文 等，含平台建议）
  - `material_clues` (jsonb)：素材线索（可用素材类别、示例线索）
  - `risk_notes` (jsonb)：风险点（合规/踩坑点提示）
  - `source_info` (jsonb)：来源信息（如 TrendRadar 源、抓取时间、原始 URL 等）
- 审计字段
  - `is_deleted`、`deleted_at`、`last_sync_at`、`server_version`、`created_time`、`updated_time`

**前端卡片展示信息（基于上述字段聚合）**：

```text
[title]  ← 选题标题

评分与热度：
  - 潜力分：potential_score
  - 热度：heat_index（结合 platform_heat 做简单标签，如「小红书高热」）

标签与适配：
  - 关键词：从 keywords 提取 3–5 个标签
  - 适配行业：industry_tags
  - 目标人群：target_audience（简要描述）
  - 推荐形式：from format_suggestions（如「小红书图文 + 抖音30s短视频 + 公众号长文」）

结构与创作提示：
  - 内容结构要点：from content_outline（3–5 条）
  - 创作角度：from creative_angles（1–3 个角度）
  - 素材线索：from material_clues（如「办公场景录屏」「前后对比截图」）

辅助信息（可折叠查看）：
  - 推荐理由：reason
  - 趋势与来源：trend 简要描述 + heat_sources 简要来源说明 + source_info
  - 风险提示：risk_notes（如「注意不要攻击具体公司/个人」「避免夸大收益」）
  - 生成批次：batch_date
  - 当前状态：status（待选/已采纳/已忽略）
```

### 3.3 每日自动推荐入口（基于默认项目）

1. 用户打开应用首页或当天首次使用创作功能；
2. 系统自动根据用户「默认项目」加载上下文（行业、品牌调性、关注话题、主打平台等）；
3. 系统调用内部热点数据服务（如 `../TrendRadar` 工程提供的趋势数据，通过 MCP 工具暴露）获取当日多平台热点；
4. Agent 将热点数据与项目/账号历史表现结合，生成一组「今日推荐选题卡片」：
   - 每个选题都已带有推荐平台与内容形式；
   - 卡片展示与 3.2 中定义的结构一致；
5. 用户在首页直接对推荐选题进行：
   - 一键选中若干条；
   - 可进行轻量编辑（改标题、调整平台）；
6. 对选中的推荐选题，系统自动为每条创建对应的脚本草稿，并直接跳转到图文脚本工作台开始创作，无需再手动触发「生成本周选题」。

---

## 4. 功能需求

### 4.1 Agent 选题意图理解（P0）

- 支持用户通过自然语言描述选题规划需求：
  - 示例：
    - 「帮我规划这周 5 条关于 AI 办公的小红书内容。」
    - 「我想明天发一条抖音，讲 Notion AI 的技巧。」
- Agent 需要识别：
  - 时间周期（这周/明天/未来三天等）；
  - 目标平台（小红书/抖音/公众号）；
  - 内容主题范围（如 AI 办公 / 职场效率 / 情感故事 等）；
  - 数量（几条内容）。

### 4.2 项目 & 账号上下文融合（P0）

- 从当前项目中获取：
  - 行业 / 细分领域；
  - 品牌调性 / 品牌关键词；
  - 关注话题与关键词；
  - 主打平台列表；
- 从账号侧获取：
  - 最近 30 天的作品主题和表现；
  - 平台各自的发布时间表现（粗粒度即可）。

> 说明：v1 可以先只用项目配置 + 近 30 天的简单数据特征，不必做复杂的机器学习模型。

### 4.3 选题生成与评分（P0）

- 对于一次「周规划」请求，默认生成不少于 `N` 条候选选题（如 7–10 条）；
- 每个选题需要具备：
  - 标题（适合用户口吻）；
  - 简要说明（1–2 句，说明内容角度）；
  - 推荐平台 & 内容形式；
  - 简单「潜力评分」（高/中/低，或 0–100 分）；
- 支持用户指定「只要小红书」或「同时考虑抖音/公众号」。

### 4.4 选题列表与编辑 UI（P0）

- 提供独立的「选题规划」面板：
  - 列表视图：每条一张卡片；
  - 可编辑选题标题；
  - 可切换/勾选适用平台；
  - 可删除某条候选选题；
- 批量操作：
  - 批量选中若干选题，一键生成对应脚本草稿。

### 4.5 与脚本工作台联动（P0）

- 对于用户勾选的每条选题，系统应自动创建：
  - 一条对应的「脚本草稿」记录，包含：
    - 选题标题；
    - 平台信息；
    - 初步结构建议；
  - 脚本草稿状态：如「待创作」。

### 4.6 简单日程建议（P1，增强）

- 在 v1 后期，可逐步增加：
  - 将选题按星期几排布；
  - 标出推荐发布时间段；
  - 提供「一键创建定时发布草稿」入口（与发布模块联动）。

### 4.7 热点数据源与 MCP 集成（P0/P1）

- 热点数据源：
  - 使用内部热点数据服务工程（如 `../TrendRadar`）定期抓取和整理多平台趋势数据；
  - 支持按行业、话题、时间维度过滤基础热点列表；
- MCP 集成：
  - 将热点数据服务以 MCP 工具形式暴露给 Agent；
  - 至少提供：
    - 获取当日/本周热点列表的工具；
    - 按项目上下文（行业/话题/平台）筛选热点的参数；
- 选题生成：
  - Agent 在生成推荐选题时，应综合：
    - 项目配置（行业、品牌调性、关注话题、主打平台等）；
    - 账号历史高表现作品主题；
    - 来自热点数据服务的当前趋势；
  - 输出结构化的选题信息，落到 3.2 中定义的选题卡片结构；
- 阶段性优先级建议：
  - v1 至少支持调用热点数据服务生成「今日推荐选题」；
  - 后续可扩展为支持按周期（本周/本月）和不同平台组合生成更复杂的选题规划。

---

## 5. 非功能与体验要求

- **交互体验**：
  - 单次「一周选题规划」的响应时间建议控制在 5–10 秒可见初步结果；
  - 选题卡片支持流式渲染，先展示前几条；
- **易用性**：
  - 语言尽量贴近日常用语；
  - 对创作者友好，不暴露复杂算法细节；
- **可扩展性**：
  - 未来可以在选题卡片中补充更多数据维度（行业热度、搜索趋势等），但不影响当前结构。

---

## 6. 验收标准（v1）

- 至少支持如下场景：
  - 小红书周规划：
    - 「帮我规划这周 5 条关于 AI 办公的小红书内容。」
  - 抖音单条选题：
    - 「我想明天发一条 30 秒抖音，讲一个 Notion AI 小技巧。」
  - 公众号长文选题：
    - 「帮我想一个本周的公众号长文选题，偏实用教程。」
- 对于上述请求：
  - 选题结果与项目/账号定位基本一致，无明显偏离；
  - 每条选题都包含平台建议、形式建议和结构要点；
  - 用户可以一键从选题生成脚本草稿进入下一步创作。